\section{Redirekcija \lstinline!>!, \lstinline!>>!, \lstinline!<!}

\todo[inline]{usmjeravanje, preusmjeravanje?}

\todo[inline]{prevest delimiter: znak za razdvajanje?}

Tradicionalni uređaji za ulaz i izlaz na računalima su tipkovnica i monitor. U Linuxu postoji razina apstrakcije koja omogućava korištenje bilo kojeg uređaja (odnosno datoteke) kao ulaznog ili izlaznog. Korištenjem operatora \lstinline!>!, \lstinline!>>!, \lstinline!<! ulaz i izlaz mogu se proizvoljno preusmjeriti. U dosadašnjim primjerima, kao ulazni uređaj korištena je tipkovnica, a izlaz programa ispisivan je u terminal (na ekran). U ovoj vježbi isprobat ćemo usmjeravanje sadržaja datoteke na ulaz programa, kao i usmjeravanje izlaza iz programa u datoteku.

\begin{tabularx}{\textwidth}{lXl}
\hline
operator & opis & primjer\\
\hline
\lstinline!>! & dodavanje u datoteku ili \texttt{stdout} &  \lstinline!ls ~ > lista.dat!\\
\lstinline!>>! & dodavanje na kraj datoteke & \lstinline!ls -al ~ >> lista.dat!\\
\lstinline!<! & ulaz iz datoteke ili \texttt{stdin} & \lstinline!wc -l < lista.dat!\\ 
\lstinline!2>! & greške (2-\texttt{stderr}) se ispisuju u datoteku & \lstinline!find /etc/ -iname gre* 2> err.dat!\\
\hline
\end{tabularx}

\begin{itemize}
 \item Nakon svakog primjera pogledati sadržaj datoteke u koje je izlaz preusmjeren. 
 \item Pogledati \lstinline!man wc!.
 \item \lstinline!/dev/null! je posebna datoteka u koji se mogu preusmjeriti neželjeni podaci. \lstinline!/dev/null! je uvijek prazan.\\
\end{itemize}

\begin{zadatak} Redirekcija: 
\begin{enumerate}
\item 
Izvršite sljedeće naredbe:
\begin{itemize}
 \item \lstinline!find /etc/ -iname gr*!
\item \lstinline!find /etc/ -iname gr* 2> err.dat!
\item \lstinline!find /etc/ -iname gr* 2> /dev/null!
\end{itemize}             
Koja je razlika između gornjih naredbi?
\item Sadržaj direktorija \lstinline!/etc/init! spremite u datoteku \lstinline!etc.dat!.
\item Koristeći redirekciju i program \lstinline!wc! prebrojite koliko bajtova ima datoteka \lstinline!etc.dat!.
\item Provjerite rezultat uspoređujući ga sa ispisom \lstinline!ls -al etc.dat!.
\item Izvršite sljedeće naredbe:
\begin{itemize}
 \item \lstinline!cat < etc.dat!
\item \lstinline!cat < etc.dat > etccopy.dat!
\item \lstinline!cat < etc.dat > etccopy.dat 2> error.dat!
\end{itemize}
Koja je razlika između gornjih naredbi?
\end{enumerate}
\end{zadatak}

\section{Naredbe grep, cut, sort, head, tail}

\begin{tabularx}{\textwidth}{lXl} 
\hline 
naredba & opis & primjer\\
\hline
cut & ispisuje određene stupce odvojene delimiterima iz datoteke &\lstinline!cut -f1 -d. etc.dat!\\
grep & ispisuje linije u kojima se pojavljuje \textit{pattern} & \lstinline!grep hal etc.dat!\\
sort & sortira linije u tekstualnoj datoteci & \lstinline!sort etc.dat!\\
head & ispisuje prvih $n$ linija datoteke (default je 10) & \lstinline!head etc.dat!\\
tail & ispisuje zadnjih $n$ linija datoteke (default je 10) & \lstinline!tail etc.dat!
\\ \hline

\end{tabularx}

\todo[inline]{Prevesti riječ default}

\begin{zadatak} Pogledajte sadržaj datoteke \texttt{/etc/passwd} (koristiti naredbu \texttt{cat} ili \texttt{less}).


\begin{enumerate}

\item Ispisati samo korisničko ime i home direktorij (tj. prvo i šesto polje) u datoteci \texttt{/etc/passwd}.\\
 \lstinline!cut -f1,6 -d: /etc/passwd!\\
-d određuje koji je delimiter koji odvaja polja u retku (u našem primjeru je \lstinline!:!)\\
-f određuje koja polja će se prikazati (u našem primjeru prvo i šesto)

\item Ispisati sortiranu datoteku \texttt{/etc/passwd} koristeći naredbu \texttt{sort}.
\item Popis korisničkih imena iz datoteke \texttt{/etc/passwd} upisati u datoteku \texttt{users}
\item Sadržaj datoteke \texttt{users} složen po abecedi upisati u datoteku \texttt{users\_sorted}
\item Iz datoteke \texttt{/etc/passwd} ispisati retke koji sadrže riječ \texttt{root}. Koristiti naredbu \texttt{grep}
\item Sve retke iz datoteke \texttt{/var/log/syslog} koji sadrže riječ \texttt{error} upisati u datoteku \texttt{errors}.
\item Uz pomoć programa \texttt{wc} prebrojite koliko redaka sadrži datoteka \texttt{errors}
\item Ispisati prvih 20 linija \texttt{/etc/passwd} datoteke. Koristiti naredbu \texttt{head}.
\item Ispisati zadnjih 10 linija \texttt{/etc/passwd} datoteke. Koristiti naredbu \texttt{tail}.
\item Napravite direktorij naziva \texttt{upute} i ostanite u svom home direktoriju. Koristeći preusmjeravanje i naredbu \texttt{man}, upišite cijele upute za naredbu \texttt{sort} izravno u datoteku \texttt{upute/sort\_manual}. Iz te datoteke izdvojite redak u kojem se nalazi riječ \texttt{Copyright} i upišite ga u datoteku \texttt{copy} u svom home direktoriju.

\todo[inline]{treba ujednačit pisanje za home direktorij da ne bude ovo "svome home" direktoriju}


\end{enumerate}
\end{zadatak}
